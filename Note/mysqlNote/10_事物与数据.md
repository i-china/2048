```
 @Author : Hale Lv
 @Created Time : 2019-09-05 09:47:32
 @Description : 
```

### MYSQL事务 TRANSACTION 

#### 事务是用户一系列的数据库操作序列，要多全做，要么全不做，是一个不可分割的工作单位
	事务的四个特性： 原子性Atomicity、一致性Consistency、隔离型Isolation、持续性Durability ，简称 ： ACID
		1. 原子性
				：必须是原子工作单元，事务中的操作要么全做，要么不做，不能只完成部分，原子性在数据库系统中，由恢复机制来实现
		2. 一致性
				：事务开始前，数据库处于一致性的状态，事务结束后，仍处于一致性状态，数据库一致性的定义由用户负责
		3. 隔离性
				：系统必须保证事务不受其他并发执行事务的影响，即当多个事务同时运行时，各事务之间相互隔离，互不干扰。 事务查看数据时所处的状态，要么是另一个并发事务修改它之前的状态，要么是另一个并发事务修改它之后的状态，事务不会查看中间状态的数据，隔离型通过系统的并发控制机制实现
		4. 持久性
				： 一个已完成的事务对数据所做的任何变动在系统中是永久有效的，即使该事务产生的修改不正确，错误也一直保持。持久性通过恢复机制实现，发生故障时，通过日志等手段恢复数据库信息
		事务的ACID原则保证了一个事务或者成功提交，或者失败回滚，二者必居其一。因此，他对事物的修改具有可恢复性，即当事务失败时，它对数据的修改都会恢复到该事务执行前的状态。

#### 开始事务
		事务以 BEGIN TRANSACTION 开始
			BEGIN TRANSACTION <事务名称> | @<事务变量名称>
				：@<事务变量名称>： 由用户定义的变量，必须用char、varchar、nchar或 nvarchar数据类型来声明该变量
				：BEGIN TRANSACTION 执行全局变量， @@TRANCOUNT 的值加1

#### 提交事务
		COMMIT 表示提交事务，即提交事务的所有操作，即将事务中所有对数据库的更新写回到磁盘的物理数据库中，事务正常结束
		提交事务，即将事务开始以来所执行的所有数据修改为数据库的永久部分，也标志着一个事务的结束，一旦执行提交事务，将不能回滚事务
			COMMIT TRANSACTION <事务名称> | @<事务变量名称> 
				COMMIT TRANSACTION 执行使全局变量 @@TRANCOUNT的值减1

#### 撤销事务
		ROLLBACK表示撤销事务，即在事务运行的过程中发生故障，事务不能继续执行，系统将事务中对数据库的所有已完成操作全部撤销， 回滚到事务开始的状态，操作指对数据库的更新操作
		当事务执行遇到错误，使用ROLLBACK TRANSACTION使事务回滚到起点或指定的保持点处，系统将清除自事务起点或到某个保存所做的所有的数据修改，并且释放由事务控制的资源。标志着事务的结束
		ROLLBACK [TRANSACTION] [ <事务名称> | @<事务变量名称> | <存储点名称> | @<含有存储点名称的变量名>] 
			：当条件回滚只影响事务的一部分，事务不需要全部撤销已执行的操作，可让事务回滚到指定位置。需在事务中设定保存点 (SAVEPOINT)。保存点所在位置之前的事务语句不用回滚，即保存点之前的操作被视为有效的，保存点的创建通过 SAVING TRANSACTION <保存点名称> 语句来实现，再执行 ROLLBACK TRANSCATION <保存点名称> 回滚到该保存点
			：如事务回滚到起点，则全局变量 @@TRANCOUNT的值减1；如事务回滚到指定的保存点， 则全局变量@@TRANCOUNT的值不变

### MYSQL数据库备份 INTO OUTFILE 
	数据库备份
		指通过导出数据或复制文件的方式来制作数据库的副本，当数据损坏，将备份的数据库加载到系统
		使用SELECT INTO OUTFILE 语句把表数据导出到一个文本文件中进行备份
			此方法只能导出或导入数据的内容，不包括表的结构，如表的结构损坏，必须先恢复原来的结构
				SELECT * FROM tb_name INTO OUTFILE '/dir/path/file.txt' FIELDS TERMINATED BY '"' LINES TERMINATED BY '?';

### MYSQL数据库恢复 LOAD DATA 
	数据库恢复 
		指以备份为基础，与备份相对应的系统维护和管理操作
		系统进行恢复操作时，先执行一些系统安全性的检查
		数据库恢复机制两个关键问题： 1. 如何建立冗余数据。 2: 如何利用冗余数据实施数据库恢复
		建立冗余数据的技术是数据转储和登录日志文件，通常在一个数据库系统中，这两种方法一起使用
		数据转储是DBA定期将整个数据库复制到磁带或另一个磁盘上保存起来的过程
		使用 LOAD DATA ... INFILE 恢复先前备份的数据
			LOAD DATA INFILE '/dir/path/file.txt' INTO TABLE tb_name FIELDS TERMINATED BY ',' OPTIONALLLY ENCLOSED BY '"' LINES TERMINATED BY '?';

### MYSQL Workbench 使用教程
			[More](http://c.biancheng.net/view/2625.html)


