```
 @Author : Hale Lv
 @Created Time : 2019-09-04 09:01:15
 @Description : 
```
### MYSQL 存储过程
	为了完成特定功能的SQL语句集合，使用存储过程的目的将常用或复杂的工作预先用SQL语句写好并用一个指定名称存储起来，这个过程经编译和优化后存储在数据库服务器中，因此称为存储过程。需要数据库提供与已定义好的存储过程的功能相同的服务，只需调用CALL 存储过程名字，即可自动完成
	存储过程的优点：
		1. 封装性
			被创建后，可被多次调用，不必重新编写
		2. 可增强SQL语句的功能和灵活性
			存储过程可用流程控制语句编写， 有很强的灵活性
		3. 可减少网络流量
			在服务器端运行，执行速度块，网络中传送的只是该调用语句，可降低网络负载
		4. 高性能
			执行一次后， 产生的二进制代码驻留在缓冲区，在调用中，需从缓冲区中执行二进制代码即可
		5. 提高数据库的安全性和数据的完整性
			使用存储过程可完成所有数据库操作，通过编程的方式控制数据库信息访问的权限

#### MYSQL创建存储过程 CREATE PROCEDURE 
			使用CREATE PROCEDURE 创建存储过程
			CREATE PROCEDURE <过程名> ([过程参数[,...]]) <过程体> [过程参数[,...]] 格式 [ IN | OUT | INOUT ] <参数名> <类型>
				1. 过程名：存储过程的名称，默认在当前数据库中创建，如要指定特定数据库中创建存储过程，要在名称前加上数据库的名称
				2. 过程参数：存储过程的参数列表，参数名为参数名，类型为参数类型。 支持三种类型的参数，即输入参数、输出参数、输入/输出参数，分别用IN、OUT、INOUT三个关键字标识。输入参数可是一个存储过程，输出参数用于存储过程返回一个操作结果的情形。
				3. 过程体： 存储过程的主体部分，也称存储过程体，以关键字 BEGIN开始， END结束。 如只有一条SQL语句，则可省略BEGIN-END标志
			修改结束命令符： DELIMITER $$
				$$ ： 用户自定义的结束符，可用其他特殊符号，如： ?? | !! | //
			在MYSQL命令行客户端输入SQL语句：
				DELIMITER ??  | DELIMITER //
			如要换回默认的分号： ';' ,则输入： DELIMITER ;
		创建不带参数的存储过程
			DELIMITER //
				CREATE PROCEDURE ShowSay()
				BEGIN
				SELECT * FROM say;
				END	//
			创建存储过程 ShowSay 后，通过CALL语句调用该存储过程的SQL语句和执行结果：
				DELIMITER ;
				CALL ShowSay();
		创建带参数的存储过程
			DELIMITER //
			CREATE PROCEDURE GetSay
			(IN name VARCHAR(20))
			BEGIN
			SELECT id FROM tb_say
			WHERE tb_name = name;
			END //
		调用： 
			DELIMITER ;
			CALL GetSay('Hale');

#### MYSQL修改存储过程 ALTER PROCEDURE
		使用ALTER PROCEDURE 语句修改存储过程的某些特征
			ALTER PROCEDURE <过程名> [ <特征> ...]
				修改存储过程的某些特征，如要修改存储过程内容，可先删除该存储过程，再重新创建
		修改存储过程的内容和名称
			可通过删除原存储过程，再以相同的命名创建新的存储过程
			可通过删除原存储过程，再以不同的命名创建新的存储过程

#### MYSQL删除存储过程 DROP PROCEDURE 
			DROP { PROCEDURE | FUNCTION | } [IF EXISTS ] <过程名>
				1. 过程名： 指定要删除的存储过程的名称
				2. IF EXISTS ： 指定这个关键字，防止因删除不存在的存储过程而引发的错误
			删除存储过程
				DROP PROCEDURE GetSay;
				
### MYSQL触发器
		触发器是一个特殊的存储过程，执行存储过程要使用CALL语句来调用，而触发器执行不需要使用CALL语句来调用，也不需要手工启动，只要一个预定义的事件发生就会被MYSQL自动调用
		引发触发器执行的事件：
			1. 增加一条学生记录时，自动检查年龄是否符合范围要求
			2. 每当删除一条学生信息时，自动删除其成绩表上的对应记录
			3. 每当删除一条数据时，在数据库存档中保留一个备份副本
		触发器的优点：
			1. 是自动执行的，相关表的数据作出相应的修改后立即执行
			2. 可通过数据库中相关的表层叠修改另外的表
			3. 触发器可实施比FOREIGN KEY约束，CHECK约束更为复杂的检查和操作
			触发器和表关系密切， 主要保护表中的数据，当有多个表具有一定的相互联系时，触发器让不同的表保持数据的一致性
		在MYSQL中，只有执行 INERT、UPDATE、DELETE操作时才能激活触发器
			MYSQL所支持的触发器有三种： INERT 触发器、UPDATE触发器、DELETE触发器
			1. INSERT 触发器
				在INERT 语句执行之前或之后响应的触发器
				需注意：
					1. 在INERT 触发器代码内， 可引发一个名为 NEW 不区分大小写的虚拟表来访问更新的值
					2. 在BEFORE UPDATE触发器中，NEW中的值可能被更新，即允许更改将要用于UPDATE语句汇总的值
					3. 对于AUTO_INCREMENT列，NEW 在INSERT执行前包含的值是0， 在INSERT执行止呕将包含新的自动生成值
			2. UPDATE 触发器
					1. 在UPDATE触发器代码内，可引用一个名为NEW的虚拟表来访问更新的值
					2. 可引用一个名为OLD的虚拟表来访问UPDATE语句执行前的值
					3. 在BEFORE UPDATE触发器中，NEW中的值可被更新，允许更改将要用于UPDATE语句中的值
					4. OLD中的值全部是只读的，不能被更新
			3. DELETE触发器
				在DELETE之前或之后响应的触发器
					1. 引用一个名为OLD的虚拟表来访问被删除的行
					2. OLD中的值全部是只读的，不能是只读的，不能被更新

#### MYSQL 创建触发器 CREATE TRIGGER 
	触发器是与MYSQL数据库有关的数据库对象
	CREATE <触发器名> <BEFORE | AFTER> <INSERT | UPDATE | DELETE > ON <表名> FOR EACH Row 触发器主体<>	
		1. 触发器名： 触发器名必须唯一
		2. INSERT | UPDATE | DELETE ： 触发事件，指定激活触发器语句的种类
			：INSERT ： 将新行插入表时激活触发器
			：DELETE ： 从表中删除某一行数据时激活触发器
			：UPDATE ： 更改表中某一行数据时激活触发器
		3. BEFORE | AFTER ：表示在激活之前或之后触发
		4. 表名 ： 与触发器相关联的表名，此表必须永久性表，不能将触发器与临时表或视图关联起来，
		5. 触发器主体： 如要执行多个语句，可使用BEGIN...END复合语句结构
		6. FOR EACH ROW ：指行级触发器，使用SHOW TRIGGERS 语句
	创建 BEFORE 类型触发器
		SELECT * FROM tb_tmp;
	创建 AFTER 类型触发器

#### MYSQL修改和删除触发器
		DROP TRIGGER [IF EXISTS] [数据库名] <触发器名>
			1. 触发器名： 要删除的触发器名
			2. 数据库名： 指定触发器所在的数据库的名称
			3. 权限 ： 执行DROP TRIGGER 语句需要 SUPER 权限
			4. IF EXISTS 
		删除触发器
			DROP TRIGGER xx_xxx；
				
### MYSQL 索引	
	索引是一个数据库对象，是数据库性能调优技术的基础，用于实现数据的快速检索
	两种方式访问数据库表的行数据：
		1. 顺序访问	
			： 是在表中实行全表扫描，从头到尾逐行遍历，直到在无需的行数据中找到符合条件的目标数据。数据量大的时候，效率低下。
		2. 索引访问
			： 通过遍历索引来直接访问表中记录行的方式，前提是对表建立一个索引，在列上创建了索引之后，查找数据时可直接根据该列上的索引找到对应记录行的位置，从而快捷地查找到数据，索引存储列指定列数据值的指针，根据指定的排序顺序对这些指针顺序
#### 索引的分类
		索引的类型和存储引擎有关，每种存储引擎所支持的索引类型不一定完全相同，根据存储方式的不同，常用的索引在物理上分为两类：
			1. B-树索引
				B-树索引称为： BTREE 索引，是一个典型的数据结构，包含的组件：
					1. 叶子节点： 包含的条目直接指向表里的数据行，叶子节点之间彼此相连，一个叶子结点有一个指向下一个叶子节点的指针
					2. 父支节点： 包含的条目指向索引其他的分枝节点或叶子节点
					3. 根节点： 一个B-树索引只有一个根节点， 位于树的最顶端的分枝节点
			B-树索引需考虑的约束：
				1. 查询必须从索引的最左边的列开始
				2. 不能跳过某一个索引列，必须按照从左到右的顺序进行匹配
				3. 存储引擎不能使用索引中范围条件右边的列
			2. 哈希索引
				哈希Hash ，就是把任意长度的输入：预映射pre-image 通过散列算法编程固定长度的输出，该输出就是散列值
					哈希所以你也称为散列索引或HASH索引，支持哈希索引的引擎： MEMORY、HEAP存储引擎
			根据索引的具体用途，索引在逻辑上可分为 5 类：
				1. 普通索引：
						最基本的索引类型，加快对数据的访问速度，没有任何限制，创建普通索引使用关键字： INDEX 或 KEY
				2. 唯一性索引：
						不允许索引具有相同索引值的索引，能确定某个数据列只包含彼此各不相同的值，使用关键字 UNIQUE 定义，不是为了提高速度，而是避免数据重复
				3. 主键索引：
						主键索引是唯一索引，不允许重复或者为空，并且每个表只能有一个主键，主键可在创建表的时候指定，也可通过修改表的方式添加， 使用关键字 PRIMARY KEY 
				4. 空间索引：
						主要用于地理空间数据类型 GEOMETRY 
				5. 全文索引：
						只能在 VARCHAR 或 TEXT 类型的列上创建，只能在MyISAM表中创建
						索引在逻辑上分为5类，索引通常被创建成单列索引和组合索引
							1. 单列索引就是索引只包含原表的一个列
							2. 组合索引也称为复合索引或多列索引，组合索引是将原表的多个列共同组成一个索引。
					索引策略对应的索引类型有： 聚集索引、次要索引、覆盖索引、复合索引、前缀索引、唯一索引等
			索引使用原则和注意事项
				1. 创建索引和维护索引耗时
				2. 索引占用物理空间
				3. 对表进行增删改，索引也需要动态维护，降低数据的维护速度
				4. 在经常用到的列上建立索引，可加快搜索的速度
				5. 在主键的列上创建索引，强制该列的唯一性，组织表中数据的排列结构
				6. 使用WHERE子句的列上创建索引，加快条件判读速度
				7. 。。
			不适合创建索引的环境：
				1. 查询中很少使用或参考的列不应该创建索引
				2. 只有很少数据值的列不应该创建索引
				3. 定义为TEXT、IMAGE和BIT数据类型的列不应该创建索引
				4. 性能远大于检索性能时，不可创建索引

### MYSQL 创建索引 CREATE INDEX
		提供三种创建索引的方法：
			1. 使用CREATE INDEX 语句，但不能创建主键
				CREATE <索引名> ON <表名> ( <列名> [ <长度> ] [ ASC | DESC ] )
						：索引名： 指定索引名，
						：表名 ： 要创建索引的表名
						：列名： 要创建索引的列名
						：长度 ： 使用列前的Length个字符来创建索引
						：ASC | DESC 
			2. 使用CREATE TABLE 
				可在创建表的同时创建，
					CREATE TABLE PRIMARY KEY [索引类型] ( <列名>,... )
					KEY | INDEX [索引名] [索引类型] (<列名>,...)
						在创建新表的同时创建该表的索引
					UNIQUE [ INDEX | KEY ] [ <索引名> ] [ <索引类型> ] ( <列名>,... )
						创建新表的同时创建该表的唯一索引
					FOREIGN KEY <索引名> <列名>
						创建新表的同时创建该表的外键
			3. 使用ALTER TABLE 
				使用ALTER TABLE 修改表的同时，向已有的表添加索引
					ATLER INDEX [<>] [<>] (<>,...)
						修改表的同时为该表添加素音
					ADD PRIMARY KEY [ <索引类型> ] ( <列名>,...)
						为该表添加唯一性索引
					ADD FOREIGN KEY [ <索引名> ] ( <列名>,... )
						为该表添加外键
			创建一般索引
			创建唯一索引
			查看索引	
				SHOW INDEX FROM <表名>  [FROM <数据库名> ]
			[More](http://c.biancheng.net/view/2605.html)

#### MYSQL 修改和删除索引 DROP INDEX
		删除索引： 删除原索引，再创建一个同名索引，实现修改索引的操作
		1. 使用 DROP INDEX 
			DROP INDEX <索引名> ON <表名>
		2. ALTER TABLE 
			ALTER TABLE tb_name DROP PRIMARY KEY
			ALTER TABLE tb_name DROP INDEX index-Name
			ALTER TABLE tb_name DROP FOREIGN KEY fk_symbol 


